{% extends 'base.html' %}

{% block content %}
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
                <div class="flash {{ category }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}
<div class="dashboard-container">
    <!-- Left panel: Conversations -->
    <div class="conversations-panel">
        <h2>Conversations</h2>
        <div id="conversation-area">
            <p class="empty-state">Select a contact to view conversation</p>
        </div>
        <div id="message-input" style="display: none;">
            <input type="text" id="new-message" placeholder="Type a message...">
            <button id="send-message">Send</button>
        </div>
    </div>

    <!-- Right panel: Contacts -->
    <div class="contacts-panel">
        <h2>{{ current_user_email }}</h2>
        <h2>Contacts</h2>
        <ul class="contacts-list">
        </ul>
        <br>

        <h3>Add Contact</h3>
        <form id="add-contact-form" action="{{ url_for('api.contact') }}" method="post">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="hidden" name="user1" value="{{ current_user_id }}">
            <label for="user2">Select User:</label>
            <select id="user2" name="user2">
            </select>
            <button type="submit">Add</button>
        </form>
    </div>
</div>
<link rel="stylesheet" href="{{ url_for('static', filename='css/Dashboard/style.css') }}">
<script src="{{ url_for('static', filename='js/socket.io.js') }}"></script>
<script src="{{ url_for('static', filename='js/Dashboard/dashboard.js') }}"></script>

{% endblock %}

